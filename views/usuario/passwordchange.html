<!-- modal-header start -->
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()">×</button>
    <h4 class="modal-title text-uppercase">Modificar senha</h4>
</div>
<!-- modal-header end -->

<!-- modal-body start -->
<div class="modal-body" ng-init="load();">

  <div ng-if="results.loading" class="row">
    <div class="col-md-12 text-center">
          <i class="fa fa-2x fa-spinner fa-spin"></i>
          <p>Processando...</p>
    </div>
  </div>

  <!-- row start -->
  <div class="row">
    <div class="col-md-12">
        <!-- Messages -->
        <div ng-if="success" class="alert alert-success">
          <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
          <span ng-bind="success"></span>
        </div>

        <div ng-if="error" class="alert alert-danger">
          <a class="close" data-dismiss="alert" aria-label="close">&times;</a>
          <span ng-bind="error"></span>
        </div>
    </div>
  </div>
  <!-- row end -->

  <!-- form start -->
  <form ng-if="!results.loading" name="$root.usuarioForm" class="form-horizontal" role="form" novalidate>

    <section class="web-application">
      <h4 class="h-text-light">Segurança</h4>
    </section>

    <div class="form-group">
      <label class="col-md-3 control-label form-horizontal"><abbr>*</abbr>Senha</label>
      <div class="col-md-9">
          <input type="password"
                  ng-model="usuario.senha"
                  name="senha"
                  class="form-control"
                  required>
          <span ng-if="usuarioForm.senha.$touched && usuarioForm.senha.$dirty" 
            class="input-dirty-touched">
              <i ng-class="usuarioForm.senha.$valid ? 'fa fa-check text-success' : 'fa fa-times text-danger'"></i>
          </span>
      </div>
    </div>

    <div class="form-group">
      <label class="col-md-3 control-label form-horizontal"><abbr>*</abbr>Confirme a senha</label>
      <div class="col-md-9">
          <input type="password"
                  ng-model="usuario.confirmarsenha"
                  name="confirmarsenha"
                  class="form-control"
                  required>
          <span ng-if="usuarioForm.confirmarsenha.$touched && usuarioForm.confirmarsenha.$dirty" 
            class="input-dirty-touched">
              <i ng-class="usuarioForm.confirmarsenha.$valid && usuario.senha == usuario.confirmarsenha ? 'fa fa-check text-success' : 'fa fa-times text-danger'"></i>
          </span>
      </div>
    </div>

  </form>
  <!-- form end -->

</div>
<!-- modal-body end -->

<!-- modal-footer start -->
<div class="modal-footer">
    <button 
        ng-if="!results.loading"
        ng-click="updatePassword()"
        ng-disabled="usuarioForm.$invalid || usuario.senha != usuario.confirmarsenha || status.loading"
        class="btn btn-sm btn-primary">
          <i ng-if="status.loading" class="fa fa-spin fa-spinner"></i>
          Salvar
    </button>
    <button class="btn btn-sm btn-default" type="button" ng-click="cancel()"> Fechar</button>
</div>
<!-- modal-footer end -->


